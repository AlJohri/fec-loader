#!/usr/bin/env node
// jshint esnext:true

var parser = require('rss-parser');

const feedUrl = 'http://efilingapps.fec.gov/rss/generate?preDefinedFilingType=ALL';

parser.parseURL(
    feedUrl,
    (err, parsed) => {
        if (err || !parsed || !parsed.feed || !parsed.feed.entries) {
            console.error(err);
        }

        const filings = parsed.feed.entries.map(filing =>
            parseInt(
                filing.link
                    .replace('http://docquery.fec.gov/dcdev/posted/', '')
                    .replace('.fec', '')
            ) + ' ' + filing.link
        );

        console.log(filings.join('\n'));
    }
);
